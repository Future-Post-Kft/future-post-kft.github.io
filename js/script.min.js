const firstSectionIdx=1,lastSectionIdx=4,fields={name:document.querySelector('input[name="name"]'),companyName:document.querySelector('input[name="company-name"]'),email:document.querySelector('input[name="email"]'),phone:document.querySelector('input[name="phone"]'),monthlyTrafficSize:document.querySelector('input[name="monthly-traffic-size"]'),weeklyServiceFrequency:document.querySelector('select[name="weekly-service-frequency"]'),deliveryNeeded:document.querySelector('input[name="delivery-needed"]'),notes:document.querySelector('textarea[name="notes"]')},ajanlatkeres=document.getElementById("ajanlatkeres"),ajanlatkeroMessages=document.querySelector("#ajanlatkeres .messages"),ajanlatkeroSubmit=document.querySelector('#ajanlatkeres button[type="submit"]'),ajanlatkeroPrev=document.querySelector("#ajanlatkeres button.prev"),ajanlatkeroNext=document.querySelector("#ajanlatkeres button.next"),ajanlatkeroLoading=document.querySelector("#ajanlatkeres .loading"),ajanlatkeroForm=document.querySelector("#ajanlatkeres form"),menu=document.querySelector("nav ul"),ajanlatkeroProgress=document.querySelector("#ajanlatkeres .progress"),footer=document.getElementById("elerhetosegeink"),MESSAGE_TYPE={ERROR:"error",SUCCESS:"success"};let currentSection=1;const addMessage=function(type,message){const container=document.createElement("div"),close=document.createElement("button"),label=document.createElement("span");close.setAttribute("type","button"),close.classList.add("close-message"),close.innerHTML="&times;",close.addEventListener("click",(function(){ajanlatkeroMessages.removeChild(container)})),message.split("|").forEach((function(row){label.appendChild(document.createTextNode(row)),label.appendChild(document.createElement("br"))})),container.appendChild(close),container.appendChild(label),container.classList.add(type),ajanlatkeroMessages.appendChild(container)},clearMessages=function(){ajanlatkeroMessages.childNodes.forEach((function(message){ajanlatkeroMessages.removeChild(message)}))},displayCurrentSection=function(){ajanlatkeroForm.querySelectorAll("[data-section]").forEach((function(row){parseInt(row.getAttribute("data-section"))===currentSection?row.classList.remove("hidden"):row.classList.add("hidden")})),ajanlatkeroNext.classList.remove("hidden"),ajanlatkeroPrev.classList.remove("hidden"),ajanlatkeroSubmit.classList.add("hidden"),4===currentSection&&(ajanlatkeroNext.classList.add("hidden"),ajanlatkeroSubmit.classList.remove("hidden")),1===currentSection&&ajanlatkeroPrev.classList.add("hidden"),ajanlatkeroProgress.querySelectorAll("span").forEach((function(dot,index){index<currentSection?dot.classList.add("active"):dot.classList.remove("active")}))};ajanlatkeroPrev.addEventListener("click",(function(){currentSection>1&&(currentSection--,displayCurrentSection())})),ajanlatkeroNext.addEventListener("click",(function(){currentSection<4&&(currentSection++,displayCurrentSection())})),ajanlatkeroForm.addEventListener("submit",(function(e){e.preventDefault();const data={name:fields.name.value,companyName:fields.companyName.value,email:fields.email.value,phone:fields.phone.value,monthlyTrafficSize:fields.monthlyTrafficSize.value,weeklyServiceFrequency:parseInt(fields.weeklyServiceFrequency.value),deliveryNeeded:fields.deliveryNeeded.checked,notes:fields.notes.value,requestTime:new Date};clearMessages(),ajanlatkeroSubmit.disabled=!0,ajanlatkeroLoading.classList.remove("hidden"),fetch("/send-offer.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)}).then((function(res){return res.json()})).then((function(_ref){let success=_ref.success,messages=_ref.messages;ajanlatkeroLoading.classList.add("hidden"),messages.forEach((function(message){addMessage(success?MESSAGE_TYPE.SUCCESS:MESSAGE_TYPE.ERROR,message)})),success?setTimeout((function(){ajanlatkeres.classList.add("closed"),document.body.classList.remove("prevent-scroll"),clearMessages()}),2e3):ajanlatkeroSubmit.disabled=!1})).catch((function(){ajanlatkeroLoading.classList.add("hidden"),ajanlatkeroSubmit.disabled=!1,addMessage(MESSAGE_TYPE.ERROR,"Nem sikerült elküldeni az ajánlatkérőt ismeretlen hiba miatt!|Kérjük, próbálja meg újra és ha a probléma továbbra is fenn áll, akkor e-mailben értesítsen bennünket az info@futurepost.hu címen!")}))})),document.querySelectorAll(".open-ajanlatkeres-modal").forEach((function(btn){btn.addEventListener("click",(function(e){e.preventDefault(),ajanlatkeroLoading.classList.add("hidden"),ajanlatkeroSubmit.disabled=!1,ajanlatkeres.classList.remove("closed"),document.body.classList.add("prevent-scroll"),currentSection=1,displayCurrentSection(),window.scrollTo(0,0)}))})),document.getElementById("cancel-offer-form").addEventListener("click",(function(){ajanlatkeres.classList.add("closed"),document.body.classList.remove("prevent-scroll"),clearMessages()})),document.getElementById("toggle-mobile-menu").addEventListener("click",(function(){menu.classList.toggle("closed")})),menu.querySelectorAll("a").forEach((function(link){link.addEventListener("click",(function(){menu.classList.add("closed")}))})),Object.values(fields).filter((function(field){return field.classList.contains("required")})).forEach((function(field){field.closest("div").classList.add("required")}));const hasModules=document.querySelectorAll(".module").length>0;if(!hasModules){let lastFooterHeight=0;const content=document.querySelector("article"),headerHeight=60,onResize=function(){const currentFooterHeight=footer.getBoundingClientRect().height;lastFooterHeight!==currentFooterHeight&&(lastFooterHeight=currentFooterHeight,content.style.minHeight="calc(100vh - "+(currentFooterHeight+headerHeight)+"px)")};window.addEventListener("resize",onResize),window.addEventListener("load",onResize)}